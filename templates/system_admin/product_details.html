<div class="product-details">
    <div class="row">
        <div class="col-md-6">
            <h4>{{ product.name }}</h4>
            <p><strong>Restaurant:</strong> {{ product.main_category.owner.restaurant_name }}</p>
            <p><strong>Main Category:</strong> {{ product.main_category.name }}</p>
            {% if product.sub_category %}
            <p><strong>Sub Category:</strong> {{ product.sub_category.name }}</p>
            {% endif %}
            <p><strong>Description:</strong> {{ product.description|default:"No description provided" }}</p>
            <p><strong>Price:</strong> ${{ product.price }}</p>
            <p><strong>Status:</strong> 
                <span class="badge {% if product.availability %}bg-success{% else %}bg-danger{% endif %}">
                    {% if product.availability %}Available{% else %}Unavailable{% endif %}
                </span>
            </p>
        </div>
        <div class="col-md-6">
            <div class="stats-grid">
                <div class="stat-item">
                    <h5>{{ total_orders }}</h5>
                    <small class="text-muted">Total Orders</small>
                </div>
                <div class="stat-item">
                    <h5>{{ total_quantity_sold }}</h5>
                    <small class="text-muted">Quantity Sold</small>
                </div>
                <div class="stat-item">
                    <h5>${{ total_revenue|floatformat:2 }}</h5>
                    <small class="text-muted">Total Revenue</small>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <!-- Recent Orders -->
    <div class="row">
        <div class="col-12">
            <h5>Recent Orders</h5>
            {% if recent_orders %}
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Table</th>
                                <th>Quantity</th>
                                <th>Unit Price</th>
                                <th>Subtotal</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in recent_orders %}
                            <tr>
                                <td>{{ item.order.order_number }}</td>
                                <td>Table {{ item.order.table_info.tbl_no }}</td>
                                <td>{{ item.quantity }}</td>
                                <td>${{ item.unit_price }}</td>
                                <td>${{ item.get_subtotal|floatformat:2 }}</td>
                                <td>{{ item.created_at|date:"M d, Y" }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-muted">No orders found for this product.</p>
            {% endif %}
        </div>
    </div>
</div>

<style>
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
}

.stat-item {
    text-align: center;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 8px;
}

.stat-item h5 {
    margin-bottom: 5px;
    color: #007bff;
}
</style>