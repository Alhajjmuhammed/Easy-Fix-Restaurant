{% extends 'base.html' %}

{% block title %}Offline - Restaurant Ordering System{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-body text-center py-5">
                <div class="mb-4">
                    <i class="fas fa-wifi-slash text-muted" style="font-size: 4rem;"></i>
                </div>
                
                <h3 class="mb-3">You're Offline</h3>
                <p class="text-muted mb-4">
                    It looks like you're not connected to the internet. 
                    You can still browse previously loaded content while offline.
                </p>
                
                <div class="mb-4">
                    <h5>What you can do offline:</h5>
                    <ul class="list-unstyled text-start">
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            View previously loaded menu items
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            Browse your order history
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            Prepare orders (they'll sync when online)
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-times text-danger me-2"></i>
                            Place new orders
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-times text-danger me-2"></i>
                            Receive real-time updates
                        </li>
                    </ul>
                </div>
                
                <button class="btn btn-primary" onclick="window.location.reload()">
                    <i class="fas fa-sync-alt me-2"></i>
                    Try Again
                </button>
                
                <div class="mt-4">
                    <small class="text-muted">
                        Your data will automatically sync when you're back online.
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Auto-retry when connection is restored
window.addEventListener('online', function() {
    // Show success message
    const toast = document.createElement('div');
    toast.className = 'toast align-items-center border-0 bg-success text-white position-fixed';
    toast.style.cssText = 'top: 20px; left: 50%; transform: translateX(-50%); z-index: 1050;';
    toast.innerHTML = `
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-wifi me-2"></i>
                Connection restored! Refreshing...
            </div>
        </div>
    `;
    
    document.body.appendChild(toast);
    
    // Reload page after short delay
    setTimeout(() => {
        window.location.reload();
    }, 2000);
});
</script>
{% endblock %}