{% extends 'base.html' %}{% extends 'base.html' %}



{% block title %}CSRF Debug - Restaurant System{% endblock %}{% block title %}CSRF Debug - Restaurant System{% endblock %}



{% block content %}{% block content %}

<div class="container mt-4"><div class="container">

    <h2>CSRF Debug Information</h2>    <h2>CSRF Debug Information</h2>

    <div class="card">    

        <div class="card-body">    <div class="alert alert-info">

            <h4>Debug Info:</h4>        <h4>Debug Info:</h4>

            <p><strong>CSRF Token:</strong> {{ csrf_token }}</p>        <p><strong>CSRF Token:</strong> {{ csrf_token }}</p>

            <p><strong>Request Method:</strong> {{ request.method }}</p>        <p><strong>Request Method:</strong> {{ request.method }}</p>

            <p><strong>User:</strong> {{ request.user }}</p>        <p><strong>User:</strong> {{ request.user }}</p>

            <p><strong>Session Key:</strong> {{ request.session.session_key }}</p>        <p><strong>Session Key:</strong> {{ request.session.session_key }}</p>

                </div>

            <h4>Headers:</h4>    

            <ul>    <div class="row">

                {% for key, value in request.META.items %}        <div class="col-md-6">

                    {% if 'CSRF' in key or 'csrf' in key %}            <h3>Test Form 1 (with csrf_token)</h3>

                        <li><strong>{{ key }}:</strong> {{ value }}</li>            <form method="post" action="{% url 'accounts:login' %}">

                    {% endif %}                {% csrf_token %}

                {% endfor %}                <div class="mb-3">

            </ul>                    <label for="username" class="form-label">Username</label>

        </div>                    <input type="text" class="form-control" name="username" id="username" required>

    </div>                </div>

</div>                <div class="mb-3">

{% endblock %}                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" name="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Test Login</button>
            </form>
        </div>
        
        <div class="col-md-6">
            <h3>Direct Login Link</h3>
            <a href="{% url 'accounts:login' %}" class="btn btn-success">Go to Regular Login Page</a>
            
            <h3 class="mt-4">Meta Tag Test</h3>
            <p id="metaTest"></p>
            
            <script>
                const metaToken = document.querySelector('meta[name="csrf-token"]');
                document.getElementById('metaTest').innerHTML = 
                    'Meta CSRF Token: ' + (metaToken ? metaToken.content : 'Not found');
            </script>
        </div>
    </div>
</div>
{% endblock %}