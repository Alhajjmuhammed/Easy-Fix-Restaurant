{% if orders %}
<div class="modern-table">
    <div class="table-responsive">
        <table class="table table-hover">
            <thead class="table-dark">
                <tr>
                    <th style="width: 50px;">SN</th>
                    <th>Order</th>
                    <th>Table</th>
                    <th>Time</th>
                    <th>Customer</th>
                    <th>Total</th>
                    <th>Notes</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>
                        <strong>#{{ order.order_number }}</strong>
                    </td>
                    <td>
                        <span class="badge bg-secondary" style="font-size: 0.7rem;">{{ order.table_info.tbl_no }}</span>
                    </td>
                    <td>
                        <small style="font-size: 0.75rem;">{{ order.created_at|date:"M d, H:i" }}</small>
                    </td>
                    <td style="font-size: 0.8rem;">
                        {{ order.ordered_by.get_full_name|default:order.ordered_by.username }}
                    </td>
                    <td>
                        <strong style="font-size: 0.8rem;">${{ order.total_amount|floatformat:2 }}</strong>
                    </td>
                    <td>
                        {% if order.special_instructions %}
                            <small class="text-muted" style="font-size: 0.7rem;">{{ order.special_instructions|truncatechars:25 }}</small>
                        {% else %}
                            <span class="text-muted">-</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-info view-order-btn" 
                                    data-order-id="{{ order.id }}" title="View Details">
                                <i class="fas fa-eye"></i>
                            </button>
                            
                            {% if order.status == 'pending' %}
                            <button type="button" class="btn btn-sm btn-outline-success update-status-btn" 
                                    data-order-id="{{ order.id }}" data-status="confirmed" title="Confirm Order">
                                <i class="fas fa-check"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-danger update-status-btn" 
                                    data-order-id="{{ order.id }}" data-status="cancelled" title="Cancel Order">
                                <i class="fas fa-times"></i>
                            </button>
                            {% elif order.status == 'confirmed' %}
                            <button type="button" class="btn btn-sm btn-outline-primary update-status-btn" 
                                    data-order-id="{{ order.id }}" data-status="preparing" title="Start Preparing">
                                <i class="fas fa-utensils"></i>
                            </button>
                            {% elif order.status == 'preparing' %}
                            <button type="button" class="btn btn-sm btn-outline-success update-status-btn" 
                                    data-order-id="{{ order.id }}" data-status="ready" title="Mark as Ready">
                                <i class="fas fa-check-circle"></i>
                            </button>
                            {% elif order.status == 'ready' %}
                            <button type="button" class="btn btn-sm btn-outline-success update-status-btn" 
                                    data-order-id="{{ order.id }}" data-status="served" title="Mark as Served">
                                <i class="fas fa-truck"></i>
                            </button>
                            {% endif %}
                            
                            <button type="button" class="btn btn-sm btn-outline-secondary edit-order-btn" 
                                    data-order-id="{{ order.id }}" title="Edit Order">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="text-center py-5">
    <div class="mb-3">
        <i class="fas fa-inbox fa-3x text-muted"></i>
    </div>
    <h5 class="text-muted">No {{ status_name|default:"" }} Orders</h5>
    <p class="text-muted">{{ status_name|default:"Orders" }} will appear here when available.</p>
</div>
{% endif %}